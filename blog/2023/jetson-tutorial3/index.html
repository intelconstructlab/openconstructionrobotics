<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Jetson Nano project template-environmental sensor | OpenConstructionRobotics </title> <meta name="author" content="OpenConstructionRobotics "> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/openconstructionrobotics/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/openconstructionrobotics/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/openconstructionrobotics/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/openconstructionrobotics/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%A4%96&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/openconstructionrobotics/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://intelconstructlab.github.io/openconstructionrobotics/blog/2023/jetson-tutorial3/"> <script src="/openconstructionrobotics/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/openconstructionrobotics/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/openconstructionrobotics/"> <span class="font-weight-bold">OpenConstructionRobotics</span> </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/openconstructionrobotics/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/openconstructionrobotics/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/openconstructionrobotics/publications/">publications </a> </li> <li class="nav-item active"> <a class="nav-link" href="/openconstructionrobotics/blog/">education </a> </li> <li class="nav-item "> <a class="nav-link" href="/openconstructionrobotics/people/">team </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Jetson Nano project template-environmental sensor</h1> <p class="post-meta"> Created on October 25, 2023 by andy </p> <p class="post-tags"> <a href="/openconstructionrobotics/blog/2023"> <i class="fa-solid fa-calendar fa-sm"></i> 2023 </a>   ·   <a href="/openconstructionrobotics/blog/tag/jetson"> <i class="fa-solid fa-hashtag fa-sm"></i> jetson</a>   ·   <a href="/openconstructionrobotics/blog/category/tutorial"> <i class="fa-solid fa-tag fa-sm"></i> tutorial</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="content">Content</h2> <ol> <li>Introduction</li> <li>Installation of the sensor</li> <li>Code preparation</li> <li>Data collection and preprocessing</li> <li>Model training and inference</li> </ol> <h2 id="introduction">Introduction</h2> <p>In this tutorial, we will install and use an environmental sensor in Jetson Nano. The environmental sensor collects information including temperature, humidity, air pressure, ambient VOC, IR light intensity, and so on. These data are generated in time scale, for which we can put them in a table. For example,</p> <table> <thead> <tr> <th style="text-align: left">Time / Attribute</th> <th style="text-align: left">Temperature (Celsius degree)</th> <th style="text-align: left">Humidity (RH)</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">0</td> <td style="text-align: left">10</td> <td style="text-align: left">80.2</td> </tr> <tr> <td style="text-align: left">1</td> <td style="text-align: left">9.8</td> <td style="text-align: left">80.4</td> </tr> <tr> <td style="text-align: left">2</td> <td style="text-align: left">9.9</td> <td style="text-align: left">80.2</td> </tr> <tr> <td style="text-align: left">3</td> <td style="text-align: left">10</td> <td style="text-align: left">80</td> </tr> </tbody> </table> <p>Since they are time-series data, we can use logistic regression to predict the values we want. For example, use temperature to predict humidity.</p> <h2 id="sensor-installation">Sensor Installation</h2> <p>Align the 40-pin connectors between Jetson Nano and the sensor:</p> <p><img src="/assets/img/post/2023-11-07-install-env-sensor.jpg" alt="Desktop View" width="480" height="480"> <em>Environmental sensor installation</em></p> <p><img src="/assets/img/post/2023-11-07-env-sensor.png" alt="Desktop View" width="480" height="480"> <em>Environmental sensor installed on Jetson Nano</em></p> <h2 id="code-preparation">Code Preparation</h2> <h3 id="install-dependencies">Install dependencies</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td> <td class="rouge-code"><pre><span class="nb">sudo </span>apt-get <span class="nb">install </span>python-smbus
<span class="nb">sudo</span> <span class="nt">-H</span> apt-get <span class="nb">install </span>python-pil
<span class="nb">sudo </span>apt-get <span class="nb">install </span>i2c-tools
<span class="nb">sudo </span>apt-get <span class="nb">install </span>python3-tk
</pre></td> </tr></tbody></table></code></pre></div></div> <h3 id="download-the-data-collection-package">Download the data collection package:</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td> <td class="rouge-code"><pre><span class="nb">sudo </span>apt-get <span class="nb">install </span>p7zip-full
wget https://files.waveshare.com/upload/f/f5/Environment_sensor_fot_jetson_nano_rev3.zip
7z x Environment_sensor_fot_jetson_nano.7z  <span class="nt">-r</span> <span class="nt">-o</span>./Environment_sensor_fot_jetson_nano
</pre></td> </tr></tbody></table></code></pre></div></div> <h3 id="test-the-package">Test the package</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td> <td class="rouge-code"><pre><span class="nb">cd </span>Environment_sensor_fot_jetson_nano
<span class="nb">sudo </span>python test.py
</pre></td> </tr></tbody></table></code></pre></div></div> <p>If everything is done, the screen will visualize the sensor outputs: <img src="/assets/img/post/2023-11-07-sensor-viz.png" alt="Desktop View" width="480" height="480"> <em>Sensor outputs on the screen</em></p> <p><code class="language-plaintext highlighter-rouge">test.py</code> visualizes all sensor outputs. There are other scripts for a single reading of the sensor signal:</p> <table> <thead> <tr> <th style="text-align: left">Sensor</th> <th style="text-align: left">Script</th> <th style="text-align: left">Note</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">Ambient light Sensor</td> <td style="text-align: left">TSL2591.py</td> <td style="text-align: left"> </td> </tr> <tr> <td style="text-align: left">Temperature and Humidity Sensor</td> <td style="text-align: left">BME280.py</td> <td style="text-align: left"> </td> </tr> <tr> <td style="text-align: left">9-AXIS Sensor</td> <td style="text-align: left">ICM20948.py</td> <td style="text-align: left"> </td> </tr> <tr> <td style="text-align: left">IR/UV Sensor</td> <td style="text-align: left">LTR390.py</td> <td style="text-align: left"> </td> </tr> <tr> <td style="text-align: left">VOC Sensor</td> <td style="text-align: left">SGP40.py</td> <td style="text-align: left">0 to 1,000 ppm ethanol equivalent</td> </tr> </tbody> </table> <p>Take a closer look at the sensor reading parts of the <code class="language-plaintext highlighter-rouge">test.py</code>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
</pre></td> <td class="rouge-code"><pre><span class="c1">#!/usr/bin/python
# -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="n">time</span>
<span class="kn">import</span> <span class="n">SH1106</span> <span class="c1">#OLED
</span><span class="kn">import</span> <span class="n">MPU9255</span> <span class="c1">#Gyroscope/Acceleration/Magnetometer
</span><span class="kn">import</span> <span class="n">BME280</span>   <span class="c1">#Atmospheric Pressure/Temperature and humidity
</span><span class="kn">import</span> <span class="n">LTR390</span>   <span class="c1">#UV
</span><span class="kn">import</span> <span class="n">TSL2591</span>  <span class="c1">#LIGHT
</span><span class="kn">import</span> <span class="n">SGP40</span>
<span class="kn">import</span> <span class="n">math</span>
<span class="kn">import</span> <span class="n">os</span>

<span class="n">os</span><span class="p">.</span><span class="nf">system</span><span class="p">(</span><span class="sh">'</span><span class="s">i2cdetect -y -r 1</span><span class="sh">'</span><span class="p">)</span>
<span class="c1"># time.sleep(1)
</span>
<span class="c1"># initiate sensor readers
</span><span class="n">bme280</span> <span class="o">=</span> <span class="n">BME280</span><span class="p">.</span><span class="nc">BME280</span><span class="p">()</span>
<span class="n">bme280</span><span class="p">.</span><span class="nf">get_calib_param</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">bme280 T&amp;H I2C address:0X76</span><span class="sh">"</span><span class="p">)</span>
<span class="n">light</span> <span class="o">=</span> <span class="n">TSL2591</span><span class="p">.</span><span class="nc">TSL2591</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">TSL2591 Light I2C address:0X29</span><span class="sh">"</span><span class="p">)</span>
<span class="n">uv</span> <span class="o">=</span> <span class="n">LTR390</span><span class="p">.</span><span class="nc">LTR390</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">UV I2C address:0x60</span><span class="sh">"</span><span class="p">)</span>
<span class="n">sgp</span> <span class="o">=</span> <span class="n">SGP40</span><span class="p">.</span><span class="nc">SGP40</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">SGP40 VOC I2C address:0X59</span><span class="sh">"</span><span class="p">)</span>
<span class="n">MPU9255</span> <span class="o">=</span> <span class="n">MPU9255</span><span class="p">.</span><span class="nc">MPU9255</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">MPU9255 9-DOF I2C address:0X68</span><span class="sh">"</span><span class="p">)</span>
<span class="n">oled</span> <span class="o">=</span> <span class="n">SH1106</span><span class="p">.</span><span class="nc">SH1106</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">OLED I2C address:0x3c</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># Initiate empty data containers
</span>

<span class="k">try</span><span class="p">:</span>
  <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Comprehensive test program...</span><span class="sh">"</span><span class="p">)</span>
  <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">please Enter ctrl+c to end program</span><span class="sh">"</span><span class="p">)</span>



  <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">time</span><span class="p">.</span><span class="nf">sleep</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span> <span class="c1"># stop for 0.2 sec before every reading
</span>    <span class="n">bme</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">bme</span> <span class="o">=</span> <span class="n">bme280</span><span class="p">.</span><span class="nf">readData</span><span class="p">()</span>
    <span class="n">pressure</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">bme</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span> 
    <span class="n">temp</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">bme</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span> 
    <span class="n">hum</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">bme</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>

    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">pressure </span><span class="si">{</span><span class="n">pressure</span><span class="si">}</span><span class="s"> kPa</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">temperature </span><span class="si">{</span><span class="n">temp</span><span class="si">}</span><span class="s"> Celsius degree</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">humidity </span><span class="si">{</span><span class="n">hum</span><span class="si">}</span><span class="s"> rh</span><span class="sh">"</span><span class="p">)</span>
    
    <span class="n">lux</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">light</span><span class="p">.</span><span class="nc">Lux</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span>

    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">lux </span><span class="si">{</span><span class="n">lux</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

    <span class="n">uvdata</span> <span class="o">=</span> <span class="n">uv</span><span class="p">.</span><span class="nc">UVS</span><span class="p">()</span>
    <span class="n">uv</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">uv</span><span class="p">.</span><span class="nc">UVS</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span> 
    <span class="n">ir</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">uv</span><span class="p">.</span><span class="nf">readdata</span><span class="p">()[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>

    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">uv </span><span class="si">{</span><span class="n">uvdata</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">ir </span><span class="si">{</span><span class="n">ir</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
          
    <span class="n">gas</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">sgp</span><span class="p">.</span><span class="nf">raw</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span>

    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">gas </span><span class="si">{</span><span class="n">gas</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    
    <span class="n">icm</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">icm</span> <span class="o">=</span> <span class="n">MPU9255</span><span class="p">.</span><span class="nf">getdata</span><span class="p">()</span>
    <span class="n">roll</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">icm</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">pitch</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">icm</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">yaw</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">icm</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>

    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">motion data: roll </span><span class="si">{</span><span class="n">roll</span><span class="si">}</span><span class="s">, pitch </span><span class="si">{</span><span class="n">pitch</span><span class="si">}</span><span class="s">, yaw </span><span class="si">{</span><span class="n">yaw</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="k">except</span> <span class="nb">KeyboardInterrupt</span><span class="p">:</span>
  <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">exit</span><span class="sh">"</span><span class="p">)</span>

</pre></td> </tr></tbody></table></code></pre></div></div> <h2 id="data-collection-and-preprocessing">Data Collection and Preprocessing</h2> <h3 id="data-collection">Data collection</h3> <p>We take the BME280 sensor as an example to collect temperature, humidity, and pressure data. Note that we are using python2 here.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
</pre></td> <td class="rouge-code"><pre><span class="c1">#!/usr/bin/python
# -*- coding:utf-8 -*-
</span><span class="kn">import</span> <span class="n">time</span>
<span class="kn">import</span> <span class="n">BME280</span>   <span class="c1">#Atmospheric Pressure/Temperature and humidity
</span><span class="kn">import</span> <span class="n">pickle</span>

<span class="c1"># initiate sensor readers
</span><span class="n">bme280</span> <span class="o">=</span> <span class="n">BME280</span><span class="p">.</span><span class="nc">BME280</span><span class="p">()</span>
<span class="n">bme280</span><span class="p">.</span><span class="nf">get_calib_param</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">bme280 T&amp;H I2C address:0X76</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># initiate the data container as dictionary
</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">humidity</span><span class="sh">'</span><span class="p">:[],</span> <span class="sh">'</span><span class="s">temperature</span><span class="sh">'</span><span class="p">:[],</span> <span class="sh">'</span><span class="s">pressure</span><span class="sh">'</span><span class="p">:[]}</span>


<span class="c1"># Record a 5-second data
</span><span class="n">duration</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>
<span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>

<span class="k">while</span> <span class="n">current_time</span> <span class="o">-</span> <span class="n">start_time</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>

  <span class="c1"># read sensor data
</span>  <span class="n">time</span><span class="p">.</span><span class="nf">sleep</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span> <span class="c1"># stop for 0.2 sec before every reading
</span>  <span class="n">bme</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="n">bme</span> <span class="o">=</span> <span class="n">bme280</span><span class="p">.</span><span class="nf">readData</span><span class="p">()</span>
  <span class="n">pressure</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">bme</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span> 
  <span class="n">temp</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">bme</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span> 
  <span class="n">hum</span> <span class="o">=</span> <span class="nf">round</span><span class="p">(</span><span class="n">bme</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>

  <span class="c1"># record the data in dataframe
</span>  <span class="n">data</span><span class="p">[</span><span class="sh">'</span><span class="s">humidity</span><span class="sh">'</span><span class="p">].</span><span class="nf">append</span><span class="p">(</span><span class="n">hum</span><span class="p">)</span>
  <span class="n">data</span><span class="p">[</span><span class="sh">'</span><span class="s">temperature</span><span class="sh">'</span><span class="p">].</span><span class="nf">append</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>
  <span class="n">data</span><span class="p">[</span><span class="sh">'</span><span class="s">pressure</span><span class="sh">'</span><span class="p">].</span><span class="nf">append</span><span class="p">(</span><span class="n">pressure</span><span class="p">)</span>

  <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="nf">time</span><span class="p">()</span>

<span class="c1"># save dataframe to pickle file
</span><span class="n">filepath</span> <span class="o">=</span> <span class="sh">"</span><span class="s">./data.pkl</span><span class="sh">"</span>
<span class="n">datafile</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="sh">'</span><span class="s">wb</span><span class="sh">'</span><span class="p">)</span>
<span class="n">pickle</span><span class="p">.</span><span class="nf">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">datafile</span><span class="p">)</span>
<span class="n">datafile</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>

</pre></td> </tr></tbody></table></code></pre></div></div> <h3 id="data-visualization">Data visualization</h3> <p>We will use matplotlib to visualize the distribution of the collected data.</p> <p>Activate the virtual environment</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td> <td class="rouge-code"><pre><span class="nb">source</span> ./myjetson/bin/activate
pip <span class="nb">install </span>matplotlib
</pre></td> </tr></tbody></table></code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td> <td class="rouge-code"><pre><span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="n">pickle</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="c1"># read pickle data 
</span><span class="n">filepath</span> <span class="o">=</span> <span class="sh">"</span><span class="s">./data.pkl</span><span class="sh">"</span>
<span class="n">datafile</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="sh">'</span><span class="s">rb</span><span class="sh">'</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pickle</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="n">datafile</span><span class="p">)</span>
<span class="n">datafile</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>

<span class="n">temp</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="sh">'</span><span class="s">temperature</span><span class="sh">'</span><span class="p">])</span>
<span class="n">hum</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="sh">'</span><span class="s">humidity</span><span class="sh">'</span><span class="p">])</span>
<span class="n">pressure</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="sh">'</span><span class="s">pressure</span><span class="sh">'</span><span class="p">])</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">arange</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">temp</span><span class="p">))</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">temp</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">"</span><span class="s">temp</span><span class="sh">"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">hum</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">"</span><span class="s">hum</span><span class="sh">"</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">pressure</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">"</span><span class="s">pressure</span><span class="sh">"</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>

</pre></td> </tr></tbody></table></code></pre></div></div> <h2 id="model-training-and-prediction">Model Training and Prediction</h2> <p>Lets train a linear regression model to predict temperature from pressure and humidity.</p> <p>We will use Linear Regression model from the Scikit-learn package.</p> <h3 id="split-dataset-into-training-and-testing">split dataset into training and testing</h3> <h3 id="training">Training</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre></td> <td class="rouge-code"><pre><span class="kn">from</span> <span class="n">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LinearRegression</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="c1"># read pickle data 
</span><span class="n">filepath</span> <span class="o">=</span> <span class="sh">"</span><span class="s">./data.pkl</span><span class="sh">"</span>
<span class="n">datafile</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="sh">'</span><span class="s">rb</span><span class="sh">'</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pickle</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="n">datafile</span><span class="p">)</span>
<span class="n">datafile</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>

<span class="n">temp</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="sh">'</span><span class="s">temperature</span><span class="sh">'</span><span class="p">])</span>
<span class="n">hum</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="sh">'</span><span class="s">humidity</span><span class="sh">'</span><span class="p">])</span>
<span class="n">pressure</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="sh">'</span><span class="s">pressure</span><span class="sh">'</span><span class="p">])</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">temp</span><span class="p">)))</span>
<span class="n">X</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">hum</span>
<span class="n">X</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pressure</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">temp</span>

<span class="c1"># fit the data
</span><span class="n">reg</span> <span class="o">=</span> <span class="nc">LinearRegression</span><span class="p">().</span><span class="nf">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="c1"># check the R**2 score
</span><span class="nf">print</span><span class="p">(</span><span class="n">reg</span><span class="p">.</span><span class="nf">score</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>

<span class="c1"># check coefficient and intercept
</span><span class="nf">print</span><span class="p">(</span><span class="n">reg</span><span class="p">.</span><span class="n">coef_</span><span class="p">,</span> <span class="n">reg</span><span class="p">.</span><span class="n">intercept_</span><span class="p">)</span>

<span class="c1">#
</span>
</pre></td> </tr></tbody></table></code></pre></div></div> <h2 id="reference">Reference</h2> <p>sensor wiki <a href="https://www.waveshare.com/wiki/Environment_Sensor_for_Jetson_Nano#How_to_use" rel="external nofollow noopener" target="_blank">https://www.waveshare.com/wiki/Environment_Sensor_for_Jetson_Nano#How_to_use</a></p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/openconstructionrobotics/blog/2023/jetson-tutorial2/">Jetson Nano project template-camera</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/openconstructionrobotics/blog/2023/jetson-tutorial1/">Jetson Nano project tutorial-hardware</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/openconstructionrobotics/blog/2023/xarm-doc1/">XArm Ufactury studio and Python SDK examples</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/openconstructionrobotics/blog/2023/go1-doc2/">Unitree Go 1 EDU doc--3D LiDAR usage and SLAM</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/openconstructionrobotics/blog/2023/go1-doc1/">Unitree Go 1 EDU doc--control with legged SDK and ROS</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 OpenConstructionRobotics . Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/openconstructionrobotics/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/openconstructionrobotics/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/openconstructionrobotics/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/openconstructionrobotics/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/openconstructionrobotics/assets/js/common.js?c15de51d4bb57887caa2c21988d97279"></script> <script defer src="/openconstructionrobotics/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/openconstructionrobotics/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/openconstructionrobotics/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/openconstructionrobotics/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/openconstructionrobotics/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/openconstructionrobotics/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/openconstructionrobotics/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/openconstructionrobotics/assets/js/search-data.js"></script> <script src="/openconstructionrobotics/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>